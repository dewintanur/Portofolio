<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Project Detail</title>

  <!-- Bootstrap 5 -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&family=Space+Grotesk:wght@500&display=swap" rel="stylesheet">

  <style>
    :root {
      --bg-dark: #0f0f1a;
      --text-dark: #fff;
      --bg-light: #f9f9f9;
      --text-light: #111;
      --accent: #ff7f50;
      --line-color-light: #ddd;
      --line-color-dark: rgba(255, 255, 255, 0.3);
      --marker-color: linear-gradient(135deg, #ff7f50, #6610f2);
    }

    body {
      font-family: 'Poppins', sans-serif;
      transition: background 0.5s, color 0.5s;
    }
    body.dark { background: var(--bg-dark); color: var(--text-dark); }
    body.light { background: var(--bg-light); color: var(--text-light); }

    /* Navbar */
    .navbar {
      background: rgba(20, 20, 35, 0.6);
      backdrop-filter: blur(12px);
    }
    .nav-link:hover { color: var(--accent) !important; }

    /* Title */
    .project-title {
      font-size: 2.5rem;
      font-weight: 800;
      background: linear-gradient(90deg, #ff7f50, #6610f2);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      text-align: center;
      margin-bottom: 50px;
    }

    /* Glass Card */
    .glass-card {
      background: rgba(255, 255, 255, 0.05);
      border-radius: 20px;
      backdrop-filter: blur(20px);
      border: 1px solid rgba(255, 255, 255, 0.1);
      box-shadow: 0 8px 32px rgba(0,0,0,0.3);
      padding: 25px 30px;
    }

    /* Carousel */
    #projectCarousel img {
      height: 400px;
      object-fit: cover;
      border-radius: 20px;
    }
    .carousel-indicators {
      position: static;
      margin-top: 12px;
    }
    .carousel-indicators [data-bs-target] {
      width: 60px;
      height: 40px;
      border-radius: 8px;
      overflow: hidden;
      margin: 0 4px;
      opacity: 0.6;
      transition: all 0.3s ease;
      border: none;
    }
    .carousel-indicators [data-bs-target].active {
      opacity: 1;
      transform: scale(1.05);
      border: 2px solid #ff7f50;
    }

    /* Buttons */
    .btn-accent {
      background: linear-gradient(135deg, #e67711, #6610f2);
      border: none;
      color: #fff;
      border-radius: 10px;
      padding: 10px 20px;
      font-weight: 500;
      transition: all 0.3s ease;
    }
    .btn-accent:hover {
      background: linear-gradient(135deg, #6610f2, #e67711);
      transform: translateY(-2px);
    }

    /* Languages */
    .language-bar {
      height: 10px;
      border-radius: 5px;
      overflow: hidden;
      display: flex;
      margin-bottom: 10px;
    }
    .language-bar div {
      height: 100%;
    }
    .language-label {
      font-size: 0.9rem;
      margin-bottom: 6px;
      display: flex;
      justify-content: space-between;
    }

    footer {
      background: rgba(20, 20, 35, 0.9);
      color: #bbb;
      text-align: center;
      padding: 20px 0;
      font-size: 0.9rem;
      margin-top: 60px;
    }
  </style>
</head>
<body class="dark">

  <!-- Navbar -->
  <nav class="navbar navbar-expand-lg fixed-top custom-navbar">
    <div class="container">
      <a class="navbar-brand fw-bold" href="index.html">Dewinta.dev</a>
      <button class="navbar-toggler custom-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
        <span></span><span></span><span></span>
      </button>
      <div class="collapse navbar-collapse justify-content-end" id="navbarNav">
        <ul class="navbar-nav align-items-center gap-3">
          <!-- Theme toggle -->
          <li class="nav-item ms-3">
            <button id="themeToggle" class="btn btn-sm btn-outline-light rounded-circle">
              <i class="bi bi-moon"></i>
            </button>
          </li>
          <!-- Lang switch -->
          <li class="nav-item ms-2">
            <div class="btn-group" role="group">
              <button class="btn btn-sm btn-outline-light active" onclick="switchLang('id')">ID</button>
              <button class="btn btn-sm btn-outline-light" onclick="switchLang('en')">EN</button>
            </div>
          </li>
        </ul>
      </div>
    </div>
  </nav>

  <!-- Content -->
  <div class="container py-5 mt-5">
    <h1 id="title" class="project-title"></h1>

    <div class="row g-5 align-items-start">
      <!-- Kiri: Visual -->
      <div class="col-lg-7">
        <!-- Carousel -->
        <div id="projectCarousel" class="carousel slide carousel-fade mb-4" data-bs-ride="carousel" data-bs-interval="3000">
          <div class="carousel-indicators" id="carouselIndicators"></div>
          <div class="carousel-inner rounded-4 shadow-lg" id="carouselImages"></div>
          <button class="carousel-control-prev" type="button" data-bs-target="#projectCarousel" data-bs-slide="prev">
            <span class="carousel-control-prev-icon bg-dark rounded-circle p-3"></span>
          </button>
          <button class="carousel-control-next" type="button" data-bs-target="#projectCarousel" data-bs-slide="next">
            <span class="carousel-control-next-icon bg-dark rounded-circle p-3"></span>
          </button>
        </div>

        <!-- Video -->
        <div class="ratio ratio-16x9 mb-4">
          <iframe id="video" src="" title="Project Video" allowfullscreen></iframe>
        </div>
      </div>

      <!-- Kanan: Detail -->
      <div class="col-lg-5">
        <!-- Deskripsi -->
        <div class="glass-card mb-4">
          <p id="desc" class="lead"></p>
        </div>

        <!-- Language Breakdown -->
        <div class="glass-card mb-4">
          <h4 class="mb-3">Languages</h4>
          <div id="languageStats"></div>
        </div>

        <!-- Tombol -->
        <div class="d-flex flex-wrap gap-3">
          <a id="repo" class="btn btn-accent" target="_blank">Repository</a>
          <a id="demo" class="btn btn-outline-secondary" target="_blank">Live Demo</a>
          <a href="index.html#portfolio" class="btn btn-secondary">â¬… Kembali</a>
        </div>
      </div>
    </div>
  </div>

 

  <script src="project-data.js"></script>
  <script>
    const params = new URLSearchParams(window.location.search);
    const id = params.get("id");
    const project = projects[id];

    let currentLang = localStorage.getItem("lang") || "id";

    function renderProject(lang) {
      if (project) {
        document.getElementById("title").innerText = project["title_" + lang];
        document.getElementById("desc").innerText = project["desc_" + lang];
        document.getElementById("repo").href = project.repo;
        document.getElementById("demo").href = project.demo;

        const carouselContainer = document.getElementById("carouselImages");
        const indicatorsContainer = document.getElementById("carouselIndicators");
        carouselContainer.innerHTML = "";
        indicatorsContainer.innerHTML = "";

        project.images.forEach((src, index) => {
          // Slide
          const div = document.createElement("div");
          div.className = "carousel-item" + (index === 0 ? " active" : "");
          div.innerHTML = `<img src="${src}" class="d-block w-100" alt="Project Image ${index+1}">`;
          carouselContainer.appendChild(div);

          // Thumbnail indicator
          const button = document.createElement("button");
          button.type = "button";
          button.setAttribute("data-bs-target", "#projectCarousel");
          button.setAttribute("data-bs-slide-to", index);
          if (index === 0) button.classList.add("active");
          button.innerHTML = `<img src="${src}" class="d-block w-100 h-100 object-fit-cover">`;
          indicatorsContainer.appendChild(button);
        });

        if (project.video) document.getElementById("video").src = project.video;

        // Languages
        const langStats = document.getElementById("languageStats");
        langStats.innerHTML = "";
        if (project.languages) {
          let total = Object.values(project.languages).reduce((a, b) => a + b, 0);
          const bar = document.createElement("div");
          bar.className = "language-bar";

          const colors = {
            JavaScript: "#f1e05a",
            PHP: "#4F5D95",
            Blade: "#563d7c",
            CSS: "#2965f1",
            Vue: "#41b883",
            HTML: "#e34c26"
          };

          Object.entries(project.languages).forEach(([name, value]) => {
            const percent = (value / total * 100).toFixed(1);
            const label = document.createElement("div");
            label.className = "language-label";
            label.innerHTML = `<span>${name}</span><span>${percent}%</span>`;
            langStats.appendChild(label);

            const barPart = document.createElement("div");
            barPart.style.width = percent + "%";
            barPart.style.background = colors[name] || "#999";
            bar.appendChild(barPart);
          });
          langStats.appendChild(bar);
        }
      }
    }

    // Theme sync
    const body = document.body;
    const themeToggle = document.getElementById("themeToggle");
    if (localStorage.getItem("theme") === "light") {
      body.classList.replace("dark", "light");
      themeToggle.innerHTML = '<i class="bi bi-sun"></i>';
    }
    themeToggle.addEventListener("click", () => {
      if (body.classList.contains("dark")) {
        body.classList.replace("dark", "light");
        themeToggle.innerHTML = '<i class="bi bi-sun"></i>';
        localStorage.setItem("theme", "light");
      } else {
        body.classList.replace("light", "dark");
        themeToggle.innerHTML = '<i class="bi bi-moon"></i>';
        localStorage.setItem("theme", "dark");
      }
    });

    // Translations
    const translations = {
      id: { footer: "Â© 2025 Dewinta | Dibuat dengan ðŸ’™ Teknologi Gen-Z" },
      en: { footer: "Â© 2025 Dewinta | Built with ðŸ’™ Gen-Z Tech" }
    };
    function switchLang(lang) {
      document.querySelectorAll('.lang').forEach(el => {
        const key = el.getAttribute('data-lang-id');
        if (translations[lang][key]) el.innerHTML = translations[lang][key];
      });
      renderProject(lang);
      document.querySelectorAll(".btn-group .btn").forEach(btn => btn.classList.remove("active"));
      document.querySelector(`.btn-group .btn[onclick="switchLang('${lang}')"]`).classList.add("active");
      localStorage.setItem("lang", lang);
    }

    renderProject(currentLang);
    switchLang(currentLang);
  </script>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
